from enum import Enum
from typing import Optional
from pydantic import BaseModel

USER_MODELS = {}

speech_to_text_model = "whisper-large-v3-turbo"

# –¢–∏–ø—ã –º–æ–¥–µ–ª–µ–π
class ModelName(str, Enum):
    # –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –≤—Ä–æ–¥–µ
    GROQ_PLTF = "groq/compound"
    # –ü–æ–ø—Ä–æ—â–µ
    LLAMA3_3_70B = "llama-3.3-70b-versatile"
    # –ü–æ–ª—É—á—à–µ
    LLAMA_MAVERICK = "meta-llama/llama-4-maverick-17b-128e-instruct"
    # –ö–≤–µ–Ω - –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫
    QWEN3_32B = "qwen/qwen3-32b"
    # –¢–æ–ø –≤—Ä–æ–¥–µ –∫–∞–∫ –∏–∑ –≤—Å–µ—Ö
    GPT_OSS_120B = "openai/gpt-oss-120b"

class AIResponse(BaseModel):
    user_msg: str
    response: str
    audio_base64: Optional[str] = None

class ModelInfo:
    def __init__(self, role: str, speed: str, quality: str, notes: Optional[str] = None):
        self.role = role          # –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –º–æ–¥–µ–ª–∏
        self.speed = speed        # —Å–∫–æ—Ä–æ—Å—Ç—å (–∏–∫–æ–Ω–∫–∏ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏)
        self.quality = quality    # –∫–∞—á–µ—Å—Ç–≤–æ
        self.notes = notes or ""  # –¥–æ–ø. –æ–ø–∏—Å–∞–Ω–∏–µ

# –í–∞—Ä–∏–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π –∏ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è
MODEL_CONFIG: dict[ModelName, ModelInfo] = {
    ModelName.GROQ_PLTF: ModelInfo(
        "‚öôÔ∏è –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —á–∞—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º",
        "‚ö°‚ö°",
        "–≤—ã—Å–æ–∫–æ–µ",
        "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏–ª–∏ –Ω–∏–∑–∫–æ–∑–∞—Ç—Ä–∞—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç. Compound Beta —Å–æ—á–µ—Ç–∞–µ—Ç LLM + web search –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –∂–∏–≤—ã–º –ø–æ–∏—Å–∫–æ–º –∏ –∫–æ–¥–æ–º, –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ —Ç–æ–∫–µ–Ω—ã."
    ),

    ModelName.LLAMA3_3_70B: ModelInfo(
        "‚öôÔ∏è –ú–æ—â–Ω–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è LLM –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∞–Ω–∞–ª–∏–∑–∞",
        "‚ö°‚ö°",
        "–≤—ã—Å–æ–∫–æ–µ",
        "70B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ–Ω—Ç–µ–∫—Å—Ç 131k —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–∞—Ç-–±–æ—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –∫–æ–¥–∞. –ë—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—â–µ –≤ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–µ, —á–µ–º Llama 4 Maverick, –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ—Ç."
    ),

    ModelName.LLAMA_MAVERICK: ModelInfo(
        "üñºÔ∏è –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è LLM —Å —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π MoE",
        "‚ö°‚ö°‚ö°",
        "–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–µ",
        "17B –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, 128 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, –∫–æ–Ω—Ç–µ–∫—Å—Ç 131k —Ç–æ–∫–µ–Ω–æ–≤, –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è (—Ç–µ–∫—Å—Ç + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è). –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑–∞ –¥–ª–∏–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤."
    ),

    ModelName.QWEN3_32B: ModelInfo(
        "‚ö° –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è LLM –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞",
        "‚ö°‚ö°",
        "–≤—ã—Å–æ–∫–æ–µ",
        "32B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ–Ω—Ç–µ–∫—Å—Ç 40k —Ç–æ–∫–µ–Ω–æ–≤. –•–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ù–µ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–∞—è, –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –Ω–∞–¥—ë–∂–Ω–∞—è –¥–ª—è NLP-–∑–∞–¥–∞—á."
    ),

    ModelName.GPT_OSS_120B: ModelInfo(
        "‚ö° –û–≥—Ä–æ–º–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–∞—è LLM —Å –≤—ã—Å–æ–∫–æ–π reasoning —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é",
        "‚ö°‚ö°‚ö°",
        "–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–µ",
        "120B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ–Ω—Ç–µ–∫—Å—Ç 131k —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö reasoning –∑–∞–¥–∞—á, –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è, –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞. –ù–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞, —Ç—Ä–µ–±—É–µ—Ç –º–æ—â–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞."
    ),

}

# –°—Ö–µ–º–∞ –∑–∞–ø—Ä–æ—Å–∞
class AIRequest(BaseModel):
    user_id: int
    model: ModelName
    message: Optional[str] = None
    audio_base64: Optional[str] = None

# –î–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π.
def get_model_description() -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π"""
    text = "üìñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:\n\n"
    for model, info in MODEL_CONFIG.items():
        text += (
            f"**{model.value}**\n"
            f"–†–æ–ª—å: {info.role}\n"
            f"–°–∫–æ—Ä–æ—Å—Ç—å: {info.speed}\n"
            f"–ö–∞—á–µ—Å—Ç–≤–æ: {info.quality}\n"
            f"{info.notes}\n\n"
        )
    return text
